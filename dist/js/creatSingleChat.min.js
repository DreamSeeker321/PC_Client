function creatSingleChat(a,i){function s(a,i,s){var e=localStorage.item||"{}",t=JSON.parse(e);t.key=i,e=JSON.stringify(t),localStorage.item=e}function e(a,i){var s=localStorage.item||"{}",e=JSON.parse(s);return!!e.key&&e.key}var t=new Date;if(0!==$(".diaItem-"+a).length)return $(".main > ul").hide(),$(".dialogList").show(),$("#mainContent > div").hide(),$(".dialogContent"+a).show(),void(e("minMsgId",d)&&e("maxMsgId",d)||(s("maxMsgId","0",d),s("minMsgId","999999",d)));var d=".diaItem-"+a;$(".main > ul").hide(),$(".dialogList").show(),$("#mainContent > div").hide(),$(".dialogContent"+a).show(),s("maxMsgId","0",d),s("minMsgId","999999",d);var n={};n.toId=a,n.toName=i;var o=$(".dialogContent").clone();o.addClass("dialogContent"+a),$("#mainContent").prepend(o),$(".dialogName").text(i),$("#mainContent > div").hide(),$(".dialogContent"+a).show();var l=[];l.push('<li class="diaItem diaItem-'+a+' active">'),l.push('<div class="avatar">'),l.push('<img src="dist/imgs/index/avatar.png" alt="">'),l.push("</div>"),l.push('<div class="diaContent">'),l.push('<div class="diaTop clearfix">'),l.push('<span class="diaName">'+i+"</span>"),l.push('<span class="diaTime">'+t.toTimeString().substr(0,5)+"</span>"),l.push("</div>"),l.push('<div class="diaDown clearfix">'),l.push("<p class='fl' \">这里是上一条消息记录</p>"),l.push("<span class='indicator fr'>99</span>"),l.push("</div>"),l.push("</div>"),l.push("</li>"),$(".diaItem").removeClass("active"),$(".dialogList").append(l.join("")),$(".main > ul").hide(),$(".dialogList").show()}function renderchat(a,i,s){function e(a){var i="";i+='<div class="sendMsg clearfix"><div class="avatar"><img src="dist/imgs/index/avatar.png"></div><span class=\'caret-right\'></span><div class="sendMsgCont">'+a+"</div></div>",localStorage.msgTime=new Date(a.time).getTime(),t(a),$(".dialogContent").find(".dgbody").append(i)}function t(a){var i,s=a.time,e=(new Date).getTime(),t=localStorage.msgTime-e;if(""==$(".dgbody").html()||t>=3e5){if(t>864e5)return void(s=s.substr(-14));if(t>31536e6)return;s=s.substr(-8)}i+='<div class="timestamp"><p>'+s+"</p></div>",$(".dialogContent").find(".dgbody").append(i)}function d(a){var i="";i+='<div class="receivedMsg clearfix"><div class="avatar"><img src="dist/imgs/index/avatar_demo.png"></div><span class=\'caret-left\'></span><div class="receivedMsgCont">'+a.c+"</div></div>",t(a),$(".dialogContent").find(".dgbody").append(i)}"send"==i?e(a):d(a)}