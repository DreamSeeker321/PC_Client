function addEmoji(e,t){var r=$(e).clone();r.attr("style",""),r.attr("onclick","");var o=r[0].outerHTML;Manager.insertImg(o,t),$(".dialogContent"+t).find(".facebox").hide(),$(".dialogContent"+t).find(".facebox").remove()}function checkBrowser(){var e=navigator.userAgent.toLowerCase(),t=!1;return/msie/i.test(e)&&!/opera/.test(e)?(strBrowser="IE: "+e.match(/msie ([\d.]+)/)[1],t=!0):/firefox/i.test(e)?strBrowser="Firefox: "+e.match(/firefox\/([\d.]+)/)[1]:/chrome/i.test(e)&&/webkit/i.test(e)&&/mozilla/i.test(e)?strBrowser="Chrome: "+e.match(/chrome\/([\d.]+)/)[1]:/opera/i.test(e)?strBrowser="Opera: "+e.match(/opera.([\d.]+)/)[1]:!/webkit/i.test(e)||/chrome/i.test(e)&&/webkit/i.test(e)&&/mozilla/i.test(e)?strBrowser="unKnow,未知浏览器 ":strBrowser="Safari: ",strBrowser=strBrowser,strBrowser}!function(e){e.fn.qqFace=function(t){var r={id:"facebox",path:"./dist/imgs/index/emoji/",assign:"content",tip:"EMO_"},o=e.extend(r,t),i=e("."+o.assign),a=o.id,s=o.path,n=o.tip,d=e(this).closest(".dialogContent").attr("id");if(i.length<=0)return alert("缺少表情赋值对象。"),!1;if(e(".dialogContent"+d).find("."+a).length<=0){strFace='<div style="width:310px;height:140px;padding:10px;position:absolute;border-radius:5px;bottom:145px;left:0;overflow: auto;clear:both;background-color:#fff;box-shadow: 0px 0px 10px #aaa;" class="'+a+'">',strFace+='<ul style="width:100%;height:100%;">';for(var c=1;c<=33;c++)c<10?strFace+='<img draggable="false" style="float:left;margin:2px;padding:0px;border:1px solid #fff;" onclick="addEmoji(this,\''+d+'\')" src="'+s+n+"00"+c+'.png" alt="" />':c<100&&(strFace+='<img draggable="false" style="float:left;margin:2px;padding:0px;border:1px solid #fff;" onclick="addEmoji(this,\''+d+'\')" src="'+s+n+"0"+c+'.png" alt="" />');strFace+="</ul>",strFace+="</div>",e(this).css("position","reletive").append(strFace)}e(".dialogContent"+d).find("."+a).show()}}(jQuery);var Manager={insertHtml:function(e,t,r){var o=document.getElementById("memo"),i=$(".dialogContent"+r).find(".textInput")[0];t=t||"memo";var a="memo"==t?o:i;if(a){a.focus();var s=window.getSelection?window.getSelection():document.selection,n=s.createRange?s.createRange():s.getRangeAt(0),d=(checkBrowser().split(":"),checkBrowser().split(":")[0]),c=Number(checkBrowser().split(":")[1]);if("IE"==d&&c<9)n.pasteHTML(e);else{var l=document.createElement("span");l.innerHTML=e,n.insertNode(l.childNodes[0]),n.collapse(!1),s.removeAllRanges(),s.addRange(n)}}},insertImg:function(e,t){this.insertHtml(e,"editor",t)}};